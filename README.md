### üìã <b>"ToDoAiogramBot"</b> - —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–æ–º.

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–ë—ç–∫–µ–Ω–¥**: Django, Django REST Framework
- **–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç**: Aiogram, Aiogram Dialog
- **–ó–∞–¥–∞—á–∏**: Celery, Redis
- **–°–£–ë–î**: PostgreSQL
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker, Docker Compose

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫:

### üîπ 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:
```
git clone https://github.com/MaxBakshaev/todo-aiogram-bot.git
```
```
cd todo-aiogram-bot
```

### üîπ 2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`.

–î–ª—è Windows:
```
type nul > .env
```

–î–ª—è Linux –∏–ª–∏ macOS:
```
touch .env
```

### üîπ 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

3.1. üîë –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ SECRET_KEY
```
python -c "import secrets; print(secrets.token_urlsafe(50))"
```
3.2. ‚úèÔ∏è –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤ POSTGRES_DB, POSTGRES_USER, POSTGRES_PASSWORD, DATABASE_URL:

- `user` ‚Äî –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î
- `pwd` ‚Äî –ø–∞—Ä–æ–ª—å
- `DBname` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –ë–î

3.3. –ü–æ —Å—Å—ã–ª–∫–µ: https://t.me/botfather —Å–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞, –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ TOKEN

```
SECRET_KEY=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
POSTGRES_DB=DBname
POSTGRES_USER=user
POSTGRES_PASSWORD=pwd
DATABASE_URL=postgres://user:pwd@postgres:5432/DBname
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
TOKEN=—Ç–æ–∫–µ–Ω_–≤–∞—à–µ–≥–æ_—Ç–µ–ª–µ–≥—Ä–∞–º_–±–æ—Ç–∞
API_URL=http://django:8000/api
```

### üîπ 4. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω. –ó–∞—Ç–µ–º —Å–æ–∑–¥–∞–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
```
make up
```
–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
```
make stop
```
–û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–µ—Ç–∏, —Ç–æ–º–∞ –∏ –æ–±—Ä–∞–∑—ã:
```
make clean
```

- üìÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ `Makefile`.

### üîπ 5. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

- Django API: http://localhost:8000/api/
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ Django: http://localhost:8000/admin/
- –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç: http://t.me/–Ω–∞–∑–≤–∞–Ω–∏–µ_–≤–∞—à–µ–≥–æ_–±–æ—Ç–∞/

## üí¨ –ö–æ–º–∞–Ω–¥—ã —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–∞:

- /start - –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º
- /tasks - –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- /add_task - –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É

## üêû –¢—Ä—É–¥–Ω–æ—Å—Ç–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

### üî∏ 1. –í–ø–µ—Ä–≤—ã–µ —Ä–∞–±–æ—Ç–∞–ª —Å Redis –∏ Celery. –ö–∞–∂–¥–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è —Ç—Ä–µ–±–æ–≤–∞–ª–∞ –∏–∑—É—á–µ–Ω–∏—è:

Redis: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±—Ä–æ–∫–µ—Ä–∞ –¥–ª—è Celery
Celery: –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –∑–∞–¥–∞—á–∞—Ö

–†–µ—à–µ–Ω–∏–µ: –ò–∑—É—á–∏–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –±–∞–∑–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

–†–µ–∞–ª–∏–∑–æ–≤–∞–ª Celery –∑–∞–¥–∞—á–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
–°–æ–∑–¥–∞–ª –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ Telegram –±–æ—Ç–∞ —Å –ø–æ—à–∞–≥–æ–≤—ã–º —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–∞–¥–∞—á

–ù–∞—Å—Ç—Ä–æ–∏–ª –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –º–µ–∂–¥—É –≤—Å–µ–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ Docker

### üî∏ 2. –ù–µ—É–¥–∞—á–Ω—ã–π –≤—ã–±–æ—Ä –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª creation_date –∫–∞–∫ PK –≤ –º–æ–¥–µ–ª—è—Ö Category –∏ Task, —á—Ç–æ –≤—ã–∑–≤–∞–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º:

–°–ª–æ–∂–Ω–æ—Å—Ç—å —Å—Å—ã–ª–æ–∫ - –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ–ª–Ω—ã–µ datetime —Å—Ç—Ä–æ–∫–∏ –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
–ß–µ–ª–æ–≤–µ–∫–æ-–Ω–µ—á–∏—Ç–∞–µ–º–æ—Å—Ç—å - –¥–ª–∏–Ω–Ω—ã–µ timestamp —Å–ª–æ–∂–Ω–æ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ URL
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ - –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–∞–∫ PK —Ç–µ—Ä—è–ª–∞—Å—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥–∏–±–∫–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è
–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–ª–ª–∏–∑–∏–∏ - —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –¥–≤—É—Ö –∑–∞–ø–∏—Å–µ–π –≤ –æ–¥–Ω—É –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—É

–†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ—à–µ–ª –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ö–µ—à-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã.

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:

–ö–æ—Ä–æ—Ç–∫–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã - 16 —Å–∏–º–≤–æ–ª–æ–≤ –≤–º–µ—Å—Ç–æ –¥–ª–∏–Ω–Ω—ã—Ö timestamp
–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å - –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
–ß–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º–æ—Å—Ç—å - —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ API –∏ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è UUID, –º–æ–¥—É–ª—å random, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Postgres –∏ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç—ã

### üî∏ 3. –ù–∞—Ä—É—à–µ–Ω–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –±–æ—Ç –∑–∞–ø—É—Å–∫–∞–ª—Å—è –≤–Ω—É—Ç—Ä–∏ Django –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–†–µ—à–µ–Ω–∏–µ: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ django –∏ bot –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.

### üî∏ 4. –£—è–∑–≤–∏–º–æ—Å—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ API
–¢—Ä—É–¥–Ω–æ—Å—Ç—å: –ü—Ä–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ API endpoint /api/tasks/ –≤–æ–∑–≤—Ä–∞—â–∞–ª –≤—Å–µ –∑–∞–¥–∞—á–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —á—Ç–æ —è–≤–ª—è–ª–æ—Å—å —Å–µ—Ä—å–µ–∑–Ω–æ–π —É—è–∑–≤–∏–º–æ—Å—Ç—å—é.

–†–µ—à–µ–Ω–∏–µ: –†–µ–∞–ª–∏–∑–æ–≤–∞–ª —Å—Ç—Ä–æ–≥—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –Ω–∞ —É—Ä–æ–≤–Ω–µ ViewSet:

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä user_telegram_id –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–¥–∞—á–∞–º
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ get_queryset() –º–µ—Ç–æ–¥e
–ö–∞—Å—Ç–æ–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–í–æ–∑–≤—Ä–∞—Ç HTTP 400 –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏, —Å–∏—Å—Ç–µ–º–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.